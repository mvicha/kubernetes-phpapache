apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: kubernetes-dashboard-ingress-tls
  namespace: kube-system
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURNakNDQWhxZ0F3SUJBZ0lKQVBRUURCRDg4K0ZoTUEwR0NTcUdTSWIzRFFFQkN3VUFNQzR4RXpBUkJnTlYKQkFNTUNtdDFZbVZ0WVhOMFpYSXhGekFWQmdOVkJBb01Ea05wYTJ4MWJTQkVhV2RwZEdGc01CNFhEVEU1TURRdwpNekUzTWpneU5Gb1hEVEl3TURRd01qRTNNamd5TkZvd0xqRVRNQkVHQTFVRUF3d0thM1ZpWlcxaGMzUmxjakVYCk1CVUdBMVVFQ2d3T1EybHJiSFZ0SUVScFoybDBZV3d3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXcKZ2dFS0FvSUJBUURFT2NuckI2RkJKNVFqd3g3bzYxL1pYZXVBR245NERwdXV6V1dUaHh6UG5lOUtqemhlWGVobQpTUDMwallMYk16MkorT1BOV2hwZXJXTmN3SS91WjcyQitMUDg5ZjZXeTJjZzQzM2JpUkhKbHFIWmo2RlVCcE1nCjU2UzZTTmVvMUtiYnI0TjFld0ZQKzRYaERDN2xqYmh1TGFyWHNQcWFSN3FUZk1IZExTTFFRNU9salBCN0pwSXcKNmlHQmdPMUt4MUl5N1YwVXczWUJYUXVXSlcxcUwyb0JxZW5USTRMclg1b1lvaWZQRXVOU2lTME9NQnQzMElMSgpDZm0xdWlVaEhYT0hHZk5JeHFMWDFLWDJ6TGZFZk5Eb3NKWVRmdWxxZ0EyZysrL2ZmSWN3dkl2NVBXV0R6cVNxCnhiK3ozbmgwYk9BejE0VWVRTGNOQll2VHZ1eWxZZVZQQWdNQkFBR2pVekJSTUIwR0ExVWREZ1FXQkJSYmVXMDkKTFNQYzVaL1BPU0ZReTIrYmFUckwvekFmQmdOVkhTTUVHREFXZ0JSYmVXMDlMU1BjNVovUE9TRlF5MitiYVRyTAovekFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFwSExMT21EYU5OUXV4ClBNM3NjR0R0a3lqeEpITGhvcFdCb3FoRW1jRHJUUms1MjB2anR1dkIxZnQxc2o1bnRuRWgzOUc4Q1c1ejBoeU8KKzNFR1V2OGNxRDVuOVE4VzkzVTFmM0ZtencybVU0N05xSEdwcTAyTEN1YUxJdjF4ajhCdlJWd3IwLzZBRXBucgpTcSsvZ2Y4NmtDamlnbUdjZkRBSUM0all6cW5jREo3MW9KVjRJTEJMZWRVR2NTcEZpK21NV2lmUCtESHJwQVgzClNYMHJwUzZYZ2Y5dVpzMEwvY0E5RGZqbzYzV0NMMWNKdHdqNDNzS0pNc1FOVnp4aXVILzUwNTJPQnJ4cU1TZTgKWjFPM3dJdkJWRjlkMkRPS3RhVmpQRTd5OWxPaVR1Y1N4OGJjcG16dTY3NzQ1QzNHZ2lDbG9VdVc3Smp6ZjZDMgpKTStGWVVyYgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRREVPY25yQjZGQko1UWoKd3g3bzYxL1pYZXVBR245NERwdXV6V1dUaHh6UG5lOUtqemhlWGVobVNQMzBqWUxiTXoySitPUE5XaHBlcldOYwp3SS91WjcyQitMUDg5ZjZXeTJjZzQzM2JpUkhKbHFIWmo2RlVCcE1nNTZTNlNOZW8xS2JicjROMWV3RlArNFhoCkRDN2xqYmh1TGFyWHNQcWFSN3FUZk1IZExTTFFRNU9salBCN0pwSXc2aUdCZ08xS3gxSXk3VjBVdzNZQlhRdVcKSlcxcUwyb0JxZW5USTRMclg1b1lvaWZQRXVOU2lTME9NQnQzMElMSkNmbTF1aVVoSFhPSEdmTkl4cUxYMUtYMgp6TGZFZk5Eb3NKWVRmdWxxZ0EyZysrL2ZmSWN3dkl2NVBXV0R6cVNxeGIrejNuaDBiT0F6MTRVZVFMY05CWXZUCnZ1eWxZZVZQQWdNQkFBRUNnZ0VCQUxMcmNuWndqWk5vTUVadmlzYWNuOWdHTUU2dFdwOHd5cm1YcFUvZ2VkL0IKUlVoNTBNOFMxMjQwamdNbjZUSlB4WVFCd2swakpEcEI1UURVd0NpRXhTSTJrSDlPR2lhTEx1eXBJY0JFZWtpUwpwZDlIZkxXdURRZUswQVBmbVd6akFZWDh3bVFqbFczRmpTeEh2SmNwSXdxcmIwU2VwZEo1SnVHR2R3cGlOb1VvCkRiV3RNemw5bGlaT0NHZnRsMy93U2lJSWlLZWNGeHJub1lUN0VWcGZGNTQyRncwZ0RWb2gvYy9UanpOdU8xRGcKRVdZczNkNGtkaUhoeHBLeXpMZUtJM3FaK3owdDA3ajVuRjN3NkVzMGVwWEg4aUhyVVlGbHMweWIxV0ZOekZjZwpQWGMwYWhORW0vUVM2Y05wZ3VGVk1temtDNkxYa1hOV0p6SW9pNUJiaHJrQ2dZRUErcVYwSEdYTm1tdk9sZ1BPClBhOUIrZit2cUl1NTB1UXJ0dk1Nbk0vb0NXSmFTYzhYbFA5M2t5MW83RXBFaEZma241U2V4WHRncTlFUGdURHAKWDlyVWhrdTQ1TkVjNWh0YkdCUlBuWnkxYWhhM0k4ZFRQMStjV1Vyd3FUYmhxTlFuQ2ExNjRpdEhPaFRIQzZibQpMVGRVekVTRHdQTmJUK3BhQ3MrdDN6eDh2ejBDZ1lFQXlHckN4WVBJSDF2b2t5d2pqaHpmbGtoaVU0cE9pdUkzClBJaFlVdkFOTHZLbEhhT3ZqaXhGc1drZi9KWXI4OEVETmdxVW54MDgrWE1CMTNSeTc1M0hLTkhIeWJWUmZiL0sKQ25kQ01RL0JUNGY3blZPb04wWmlrR1ZyTjNROGdxZHVqM2kvTGN5MVpWQkxaN0g3QVNKbmdCTndnRThvMEozdApWWXlGc0xJS1Azc0NnWUE5TlJJNXJSS2NWeDlIdXY0dVNoSU9mc1hpbnR4dUI1STFSdjBaZmh2bnpzREZyWERRCnplSGhhd0ZvVW1xUTl2VzVrbzJESkRIalExWko4aXZMWUtEdGVxaFlHRWk2V0l2U1FZTi90YmtIZ3l5TjdDc0UKR3RFUGJTRi84UXNDTTJ5bERGd3B4dS9KMnpFUVExMktSU3pNQlI4M2l6WU5PZWxySW5RUFE3SWk4UUtCZ1FDVQpVcDZ1K3FhQ3ZzeFREeG1KTlVrcnVZbzdkV0pIV3IreVp0Mm5FODFONzNuUGc3S0xMNnlzYmJha2dxY29rTEhGCnJ2THJCd0ozUW13Y2Zpd0p0ZVVOQ3FRblhhOWZ0eTdackFVcXRoUkV2Y2l6V0pSbnhBbHgvL3puWDNqZzRQVHIKN1ZyZmxGNnpDa2VrQ0k1UStwdEtxQmhjZlRraG01OW43c1dLVFZsVVBRS0JnQ3FFVHdjZldmdCtqWWp1WlZXZwo4bFZtSmxoV0prQUJLNytPTzNLdXFSZCtPYWZCbWY5cUF5Q0pXeDA1MzRCTkE2bGI4ckl5czk3YXlkNTl5L3Y4CnVibGxBcFF3TUtzMG1KV1ZFSnZ5Mmk5V0NxR0Fac1VQMG9uTm9HWHhuVmI5UlVHcm4xelhzYklyek83ekt0WWoKZHdGdWVUT1gydDB0ZCtwZGVQd21EVWlsCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    ingress.kubernetes.io/ssl-passthrough: "true"
    nginx.org/ssl-backends: "kubernetes-dashboard"
    kubernetes.io/ingress.allow-http: "false"
    nginx.ingress.kubernetes.io/secure-backends: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$1
    nginx.ingress.kubernetes.io/configuration-snippet: |
      rewrite ^(/dashboard)$ $1/ permanent;
      rewrite ^(/phpapache)$ $1/ permanent;
  name: kubernetes-dashboard-ingress
  namespace: kube-system
spec:
  tls:
  - hosts:
    - kubemaster
    secretName: kubernetes-dashboard-ingress-tls
  rules:
  - host: kubemaster
    http:
      paths:
      - path: /dashboard/?(.*)
        backend:
          serviceName: kubernetes-dashboard
          servicePort: 443
      - path: /phpapache/?(.*)
        backend:
          serviceName: php-apache-service
          servicePort: 80
